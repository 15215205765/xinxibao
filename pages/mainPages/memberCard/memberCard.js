(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mainPages/memberCard/memberCard"],{"0fd9":function(t,a,e){"use strict";var o,i=function(){var t=this,a=t.$createElement;t._self._c;t._isMounted||(t.e0=function(a){t.payQrcodeShow=!0},t.e1=function(a){t.show=!1})},n=[];e.d(a,"b",function(){return i}),e.d(a,"c",function(){return n}),e.d(a,"a",function(){return o})},"6bbf":function(t,a,e){"use strict";(function(t){e("f466");o(e("66fd"));var a=o(e("afae"));function o(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("543d")["createPage"])},"8da2":function(t,a,e){"use strict";var o=e("d783"),i=e.n(o);i.a},"98ab":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(e("3099")),i=n(e("a81a"));function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return d(t)||l(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function d(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}var c=function(){return e.e("components/template/PopManager").then(e.bind(null,"b696"))},f=function(){return Promise.all([e.e("common/vendor"),e.e("components/template/searchView")]).then(e.bind(null,"7840"))},u=function(){return e.e("components/template/tabBar").then(e.bind(null,"27e4"))},p=function(){return e.e("components/template/barrage").then(e.bind(null,"bf13"))},g=function(){return e.e("components/template/loadmore").then(e.bind(null,"789c"))},m=function(){return e.e("components/template/loadlogo").then(e.bind(null,"9976"))},h=function(){return e.e("components/template/follow").then(e.bind(null,"c771"))},_={components:{PopManager:c,searchView:f,TabBars:u,barrage:p,loadmore:g,loadlogo:m,follow:h},data:function(){return{followTitleShow:!0,followShow:!1,followType:"0",privilege:"",halfcardtext:"一卡通",credittext:"积分",scdpText:"",center:"center",isActive:0,type:0,mbTwoChecks:0,mbThreeChecks:0,mbPr:0,show:!1,popChecked:0,memberCardInfoImg:"",memberCardHomeInfo:{},card:null,colorEquity:[],zkList:[],total:null,page:1,cardpa:"",timeList:[],weekList:["今日","明日"],time:null,jfList:[],qgList:[],tgList:[],phoneHight:null,itemInfo:{},homeList:{},lbList:[],payQrcodeShow:!1,kqList:[],mid:null,barrageList:[],isMore:!0,loadingPop:!0,HomeType:!1,barrageType:!0,sortType:""}},computed:{equityMemberImg:function(){return this.imageRoot+"memberImg.png"},tabBarSetList:function(){var t=this,a=t.memberCardHomeInfo.option_set;if(a&&a.length>0){var e=[];return a.map(function(t){"1"===t.status&&e.push(t)}),e}}},onHide:function(){},onUnload:function(){var t=this;t.set=t.$refs["getset"],t.set.clearSet()},onReady:function(){},onLoad:function(a){var e=this;if(t.getSystemInfo({success:function(t){e.phoneHight=t.windowHeight+"px"}}),t.getStorage({key:"TextSubstitution",success:function(t){e.halfcardtext=t.data.halfcardtext,e.privilege=t.data.privilege,e.credittext=t.data.credittext}}),t.getStorage({key:"userinfo",success:function(t){e.mid=t.data.mid}}),6==a.type){var i={id:a.id};o.default._post_form("&p=halfcard&do=useDiscountCard",i,function(t){e.showPup(t.data.is_link,t.data)})}if(4==a.type){var n={id:a.id};o.default._post_form("&p=halfcard&do=useGiftPackage",n,function(t){e.showPup(t.data.is_link,t.data)})}e.init(),e.id=a.id,e.openType=a.type},watch:{barrageList:{handler:function(){},deep:!0}},methods:{closeFollowTitle:function(){var t=this;t.followTitleShow=!1},closeFollowPop:function(){var t=this;t.followShow=!1},openQrShow:function(){var t=this;t.followShow=!0},clickclick:function(){var t=this;t.barrageType=!1,console.info(t.barrageType)},closeShow:function(){var t=this;t.show=!1},getInfo:function(a,e,i,n,s,r,l){var d=this;if(1==a)if("1"==r)"0"==i?o.default.navigationTo({url:"pages/mainPages/store/buyOrder?type=&sid="+l+"&mid="+d.mid}):o.default.navigationTo({url:"pages/mainPages/store/buyOrder?type=&pack_id="+l+"&mid="+d.mid});else{if(0==i){var c={id:e};o.default._post_form("&p=halfcard&do=useDiscountCard",c,function(t){d.showPup(t.data.is_link,t.data)})}if(1==i){var f={id:e};o.default._post_form("&p=halfcard&do=useGiftPackage",f,function(t){d.showPup(t.data.is_link,t.data)})}}else 1==s?o.default.navigationTo({url:n}):t.showModal({title:"提示",content:"对不起，您不符合使用要求",showCancel:!1,success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&console.log("用户点击取消")}})},init:function(){var a=this;a.memberCardHome();for(var e=new Date((new Date).setHours(0,0,0,0))/1e3,o=(new Date).getDay(),i=0;i<7;i++){var n=o++;n>5&&(o=0),i>1&&a.weekList.push(a.getWeek(n))}for(var s=0;s<7;s++){var r=a.formDat(e+86400*s).substring(0,5),l=e+86400*s,d={time:r,timeData:l};a.timeList.push(d),console.info(a.timeList)}a.time=a.timeList[0].timeData,t.getSystemInfo({success:function(t){a.phoneHight=t.windowHeight+"px"}}),a.payBarrageList()},payBarrageList:function(){var t=this,a={type:4};o.default._post_form("&do=payBarrageList",a,function(a){t.barrageList=a.data})},getHomeList:function(){var t=this,a={type:0};o.default._post_form("&p=store&do=cateList",a,function(a){t.homeList=a.data})},closePayQr:function(){var t=this;t.payQrcodeShow=!1},goEquity:function(t){o.default.navigationTo({url:t})},go:function(t){o.default.navigationTo({url:t})},load:function(){var t=this,a=t.type,e=t.sortType;if(t.total!==t.page){if(t.page++,t.isMore=!1,console.log("变成false了",t.page,t.total),"zk"==a){var n={page:t.page,page_index:5,lng:"",lat:"",type:1,time:t.time,sort:e,is_total:1};o.default._post_form("&p=halfcard&do=homeList",n,function(a){t.zkList=[].concat(s(t.zkList),s(a.data.list)),t.total=a.data.total,a.data.list.length<5&&(t.isMore=!0,console.log("变成true了",t.page,t.total))})}if("pr"==a){var r={page:t.page,page_index:5,lng:"",lat:"",type:2,time:"",sort:e,is_total:1};o.default._post_form("&p=halfcard&do=homeList",r,function(a){t.zkList=[].concat(s(t.zkList),s(a.data.list)),t.total=a.data.total,a.data.list.length<5&&(t.isMore=!0,console.log("变成true了",t.page,t.total))})}if("jf"==a){var l={page:t.page,page_index:5,sort:e,type:"",cate_id:"",is_vip:1};o.default._post_form("&p=consumption&do=homeList",l,function(a){t.jfList=[].concat(s(t.jfList),s(a.data.list)),t.total=a.data.total,a.data.list.length<5&&(t.isMore=!0,console.log("变成true了",t.page,t.total))})}if("qg"==a){var d={page:t.page,page_index:5,lng:"",lat:"",status:"",sort:e,is_total:1,is_vip:1};o.default._post_form("&p=rush&do=homeList",d,function(a){t.qgList=[].concat(s(t.qgList),s(a.data.list)),t.total=a.data.total,a.data.list.length<5&&(t.isMore=!0,console.log("变成true了",t.page,t.total))})}if("tg"==a){var c={page:t.page,page_index:5,lng:"",lat:"",status:2,sort:e,is_total:1,is_vip:1};o.default._post_form("&p=groupon&do=homeList",c,function(a){for(var e=0;e<a.data.list.length;e++)a.data.list[e].endtime=i.default.formatTime(a.data.list[e].endtime,"rule","-");t.tgList=[].concat(s(t.tgList),s(a.data.list)),t.total=a.data.total,a.data.list.length<5&&(t.isMore=!0,console.log("变成true了",t.page,t.total))})}if("lb"==a){var f={page:t.page,page_index:5,lng:"",lat:"",status:1,sort:e,is_total:1,store_cate_id:""};o.default._post_form("&p=halfcard&do=packageList",f,function(a){t.lbList=[].concat(s(t.lbList),s(a.data.list)),t.total=a.data.total,a.data.list.length<5&&(t.isMore=!0,console.log("变成true了",t.page,t.total))})}if("kq"==a){var u={page:t.page,page_index:5,lng:"",lat:"",sort:e,is_total:1,is_vip:1};o.default._post_form("&p=wlcoupon&do=homeList",u,function(a){t.kqList=[].concat(s(t.kqList),s(a.data.list)),t.total=a.data.total,a.data.list.length<5&&(t.isMore=!0,console.log("变成true了",t.page,t.total))})}}},formDat:function(t){return i.default.formatTime(t,"normal","-")},getWeek:function(t){return 0==t?"周日":1==t?"周一":2==t?"周二":3==t?"周三":4==t?"周四":5==t?"周五":6==t?"周六":void 0},loadShow:function(){console.info("我才刚刚执行")},memberCardHome:function(){var t=this,a={};o.default._post_form("&p=halfcard&do=memberCardHome",a,function(a){t.HomeType=!0,t.barrageType=!0,t.memberCardHomeInfo=a.data;var e=t.tabBarSetList&&t.tabBarSetList.length>0?t.tabBarSetList[0].type:0,o=t.tabBarSetList&&t.tabBarSetList.length>0?t.tabBarSetList[0]["sort"]:"";t.sortType=o,t.type=e,1===a.data.switch_set.option_switch&&(t.getHomeList(),t.checkDiscount(0,e,o)),a.data.info.id?(t.card="have",""==a.data.info.cardimg?t.memberCardInfoImg="background-image:url('"+a.data.info.cardimg+"')":t.memberCardInfoImg="background-image:url('"+a.data.info.cardimg+"');"):(t.card="nhave",t.memberCardInfoImg="background-image:url('"+a.data.info.cardimg+"')");for(var i=0;i<a.data.list.length;i++)t.colorEquity.push("color:"+a.data.list[i].color),console.info(t.colorEquity)},function(t){console.info(),"一卡通功能已关闭"==t.data.message&&o.default.navigationTo({url:"pages/mainPages/index/index"})})},goGetMember:function(){var t=this;o.default.navigationTo({url:"pages/mainPages/memberCard/getMembership/getMembership?card="+t.card})},popChecks:function(t){var a=this;a.popChecked=t},showPup:function(t,a){var e=this;e.itemInfo=a,1==t&&(e.show=!0),0==t&&(console.info(String(a.url)),window.open(a.url))},checkPr:function(t,a){var e=this;e.mbPr=t,e.page=1,e.isMore=!1;var i={page:e.page,page_index:5,lng:"",lat:"",status:1,type:2,sort:e.sortType,is_total:1,store_cate_id:a};o.default._post_form("&p=halfcard&do=homeList",i,function(t){e.zkList=t.data.list,e.total=t.data.total,e.page!=t.data.total&&0!=t.data.total||(e.isMore=!0)})},checkMbThree:function(t,a){var e=this;e.mbThreeChecks=t,e.page=1,e.isMore=!1,console.log(123);var i={page:e.page,page_index:5,lng:"",lat:"",status:1,sort:e.sortType,is_total:1,store_cate_id:a};o.default._post_form("&p=halfcard&do=packageList",i,function(t){e.lbList=t.data.list,e.total=t.data.total,console.info(e.lbList),e.page!=t.data.total&&0!=t.data.total||(e.isMore=!0)})},checkDiscount:function(t,a,e){var n=this;if(n.isActive=t,n.page=1,n.type=a,n.isMore=!1,n.sortType=e,"zk"==a){var s={page:n.page,page_index:5,lng:"",lat:"",type:1,time:n.time,sort:e,is_total:1};o.default._post_form("&p=halfcard&do=homeList",s,function(t){n.zkList=t.data.list,n.total=t.data.total,n.isMore=0===t.data.list.length||n.page===t.data.total})}if("pr"==a){var r={page:n.page,page_index:5,lng:"",lat:"",type:2,time:"",sort:e,is_total:1};o.default._post_form("&p=halfcard&do=homeList",r,function(t){n.zkList=t.data.list,n.total=t.data.total,n.isMore=0===t.data.list.length||n.page===t.data.total})}if("jf"==a){var l={page:n.page,page_index:5,sort:e,type:"",cate_id:"",is_vip:1};o.default._post_form("&p=consumption&do=homeList",l,function(t){n.jfList=t.data.list,n.total=t.data.total,n.isMore=0===t.data.list.length||n.page===t.data.total})}if("qg"==a){var d={page:n.page,page_index:5,lng:"",lat:"",status:"",sort:e,is_total:1,is_vip:1};o.default._post_form("&p=rush&do=homeList",d,function(t){n.qgList=t.data.list,n.total=t.data.total,n.isMore=0===t.data.list.length||n.page===t.data.total})}if("tg"==a){var c={page:n.page,page_index:5,lng:"",lat:"",status:2,sort:e,is_total:1,is_vip:1};o.default._post_form("&p=groupon&do=homeList",c,function(t){for(var a=0;a<t.data.list.length;a++)t.data.list[a].endtime=i.default.formatTime(t.data.list[a].endtime,"rule","-");n.tgList=t.data.list,n.total=t.data.total,n.isMore=0===t.data.list.length||n.page===t.data.total})}if("lb"==a){var f={page:n.page,page_index:5,lng:"",lat:"",status:1,sort:e,is_total:1,store_cate_id:""};o.default._post_form("&p=halfcard&do=packageList",f,function(t){n.lbList=t.data.list,n.total=t.data.total,n.isMore=0===t.data.list.length||n.page===t.data.total})}if("kq"==a){var u={page:n.page,page_index:5,lng:"",lat:"",sort:e,is_total:1,is_vip:1};o.default._post_form("&p=wlcoupon&do=homeList",u,function(t){n.kqList=t.data.list,n.total=t.data.total,n.isMore=0===t.data.list.length||n.page===t.data.total})}},checkMbTwoData:function(t,a){var e=this;e.mbTwoChecks=t,e.zkList=[],e.page=1,e.time=a;var i={page:e.page,page_index:5,lng:"",lat:"",type:1,time:a,sort:e.sortType,is_total:1};o.default._post_form("&p=halfcard&do=homeList",i,function(t){e.zkList=[].concat(s(e.kqList),s(t.data.list)),e.total=t.data.total,e.isMore=!0})}}};a.default=_}).call(this,e("543d")["default"])},afae:function(t,a,e){"use strict";e.r(a);var o=e("0fd9"),i=e("c9f0");for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);e("8da2");var s,r=e("f0c5"),l=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"35686eb0",null,!1,o["a"],s);a["default"]=l.exports},c9f0:function(t,a,e){"use strict";e.r(a);var o=e("98ab"),i=e.n(o);for(var n in o)"default"!==n&&function(t){e.d(a,t,function(){return o[t]})}(n);a["default"]=i.a},d783:function(t,a,e){}},[["6bbf","common/runtime","common/vendor"]]]);