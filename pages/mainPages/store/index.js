(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mainPages/store/index"],{"2da4":function(t,e,o){"use strict";o.r(e);var n=o("70ac"),a=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);e["default"]=a.a},"684e":function(t,e,o){"use strict";var n,a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.shareBottomShow=!0},t.e1=function(e){t.shareBottomShow=!0})},i=[];o.d(e,"b",function(){return a}),o.d(e,"c",function(){return i}),o.d(e,"a",function(){return n})},"70ac":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(o("3099"));function a(t){return t&&t.__esModule?t:{default:t}}var i=function(){return o.e("components/page/pageComponents/Video").then(o.bind(null,"a2a30"))},r=function(){return o.e("components/template/storeGoods").then(o.bind(null,"2093"))},s=function(){return o.e("components/template/storeComment").then(o.bind(null,"3a2d"))},u=function(){return o.e("components/template/storeDynamic").then(o.bind(null,"f7c4"))},c=function(){return o.e("static/mpvue-wxparse/src/wxParse").then(o.bind(null,"65c3"))},d=function(){return o.e("components/template/loadlogo").then(o.bind(null,"9976"))},l=function(){return o.e("components/template/PopManager").then(o.bind(null,"b696"))},f=function(){return o.e("components/template/shareBottom").then(o.bind(null,"cb2e"))},h=null,g={data:function(){return{currentBannerHeight:0,shareId:null,bannerHeightList:[],tags:[],zd:0,scrollHeight:null,isPadding:null,postId:"",postType:"8",shareBottomShow:!1,shareShow:!1,shareType:"top",lat:null,lng:null,slide_Top:0,currentTab:"goods",options:{},StoreData:{attestation:{attestation:0,bondflag:0}},bannerType:null,tabbar:null,isVideoPlay:!1,muted:!1,sid:null,loadlogo:!0,deliverystatus:{deliverystatus:0}}},onReady:function(){h=t.createVideoContext("shopVideo",this)},created:function(){},methods:{goTakeout:function(){console.log(1111),n.default.navigationTo({url:"pages/subPages2/businessCenter/foodList/foodList?id="+this.deliverystatus.id+"&storeid="+this.deliverystatus.id})},imageError:function(t){console.error("image发生error事件，携带值为"+t.detail.errMsg)},imageLoad:function(t){var e=this,o=t.detail.width,n=t.detail.height,a=o/n,i=750/a,r=i,s=e.bannerHeightList;s[t.target.dataset.id]=r,this.setData({bannerHeightList:s})},bindchange:function(t){this.setData({currentBannerHeight:t.detail.current})},loadmore:function(){var t=this;"goods"==t.currentTab?t.$refs.storeGoods.ReachBottom():"state"==t.currentTab?t.$refs.storeDynamic.ReachBottom():"comment"==t.currentTab&&t.$refs.storeComment.ReachBottom()},labelZd:function(){var t=this;"0"==t.zd?t.zd=1:t.zd=0},closeShareBottom:function(){var t=this;t.shareBottomShow=!1},goMine:function(){n.default.navigationTo({url:"pages/mainPages/userCenter/userCenter"})},goHome:function(){n.default.navigationTo({url:"pages/mainPages/index/index"})},bannerChange:function(t){this.bannerType=t,"video"===t&&h.play()},closeShareShow:function(){var t=this;t.shareShow=!1,t.shareBottomShow=!1},shareImgShow:function(){var t=this;t.shareShow=!0,t.shareBottomShow=!1},getStoreDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=this,a=[{title:"商品",type:"goods",status:!0},{title:"详情",type:"detail",status:!0},{title:"动态",type:"state",status:!0},{title:"评论",type:"comment",status:!0},{title:"相册",type:"photo",status:!0},{title:"小程序码",type:"qrCode",status:!0}];return new Promise(function(i,r){n.default._post_form("&p=store&do=detail",{sid:t,lat:e?e.latitude:"",lng:e?e.longitude:""},function(t){o.postId=t.data.id;var e=t.data;o.deliverystatus=t.data,o.tags=t.data.tags,e.score=Number(e.score),e.noScore=Number(5-e.score),"1"==o.deliverystatus.deliverystatus&&(a[0].title="活动"),e.wxapp_qrcode||(a[5]["status"]=!1),o.bannerType=e.adv&&e.adv.length>0?"imgs":e.videourl?"video":"full",o.setData({StoreData:e,tabbar:a})},!1,function(){o.loadlogo=!1})})},goLt:function(){var t=this;n.default.navigationTo({url:"pages/subPages/homepage/chat/chat?other_party_id="+t.sid+"&other_party_type=2&type=1"})},collectStore:function(){var t=this;t.options;n.default._post_form("&p=store&do=collection",{sid:t.sid},function(e){0===e.errno&&(t.StoreData.is_collection=1===t.StoreData.is_collection?0:1,n.default.showSuccess(1===t.StoreData.is_collection?"收藏成功":"取消收藏"))})},supple:function(e,o){if("mobile"===o&&t.makePhoneCall({phoneNumber:e["mobile"]}),"address"===o){console.info("storeInfo",e);var a={storename:e["storename"],address:e["address"],location:{lat:e["location"]["lat"],lng:e["location"]["lng"]}};n.default.openLocation(a)}},curtabBar:function(t){var e=this;"goods"===t&&e.$refs.storeGoods.tabbarShow(),"comment"===t&&e.$refs.storeComment.tabbarShow(),"state"===t&&e.$refs.storeDynamic.tabbarShow(),e.currentTab=t},prevPhoto:function(e,o){var n=this;"shopPhoto"===o&&t.previewImage({current:n.StoreData.album[e],urls:n.StoreData.album,indicator:"default",success:function(t){console.log(t)}})},showVideoStatus:function(t){t.currentTarget.id;var e,o=t.type;e="play"==o,this.isVideoPlay=e},videoMuted:function(t){console.log("muted"),this.muted=!this.muted},naviBuyOrder:function(t,e){n.default.navigationTo({url:"pages/mainPages/store/buyOrder?sid="+t+"&mid="+e})},wxApiCallback:function(){var e=this;jWeixin.ready(function(){jWeixin.getLocation({type:"gcj02",success:function(o){n.default.getAreaId(o,"","",function(t){e.$nextTick(function(){e.getStoreDetail(t.sid,o)})}),e.setData({currentLoction:o}),t.setStorageSync("curLoction",o)},fail:function(){n.default.getAreaId("","","",function(t){e.$nextTick(function(){e.getStoreDetail(t.sid,"")})})},cancel:function(){n.default.getAreaId("","","",function(t){e.$nextTick(function(){e.getStoreDetail(t.sid,"")})})}})})}},onLoad:function(e){var o=this,a=(e.sid,n.default.getClientType());o.shareId=e.sid,t.getSystemInfo({success:function(t){var e=t.model,n=["iPhone10,3","iPhone10,6","iPhone11,8","iPhone11,2","iPhone11,6"];o.isPadding=n.includes(e)||-1!==e.indexOf("iPhone X")||-1!==e.indexOf("iPhone12"),o.phoneHight=t.windowHeight,o.scrollHeight=o.phoneHight+"px"}});var i=t.getStorageSync("curLoction"),r=t.getStorageSync("agencyData");"1"===a||"3"===a?i?r?o.getStoreDetail(e.sid,i):n.default.getAreaId(i,"","",function(t){o.getStoreDetail(t.sid,i)}):r?(o.getStoreDetail(e.sid,o.currentLoction),console.log(o.currentLoction,"_this.currentLoction")):n.default.getLocation().then(function(e){n.default.getAreaId(e,"","",function(t){o.$nextTick(function(){o.getStoreDetail(o.shareId,e)})}),o.setData({currentLoction:e}),t.setStorageSync("curLoction",e)}):o.getStoreDetail(e.sid),o.setData(e),o.sid=e.sid},mounted:function(){},watch:{isVideoPlay:function(e,o){h=t.createVideoContext("shopVideo",this)}},computed:{},components:{shareBottom:f,DiyVideo:i,storeGoods:r,storeComment:s,storeDynamic:u,wxParse:c,loading:d,PopManager:l},onReachBottom:function(t){var e=this,o=e.currentTab,n="goods"===o?"storeGoods":"state"===o?"storeDynamic":"comment"===o?"storeComment":"";n&&e.$refs.refsData.ReachBottom()}};e.default=g}).call(this,o("543d")["default"])},"83bd":function(t,e,o){"use strict";o.r(e);var n=o("684e"),a=o("2da4");for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);o("f06d");var r,s=o("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"16483132",null,!1,n["a"],r);e["default"]=u.exports},"8d99":function(t,e,o){"use strict";(function(t){o("f466");n(o("66fd"));var e=n(o("83bd"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},c456:function(t,e,o){},f06d:function(t,e,o){"use strict";var n=o("c456"),a=o.n(n);a.a}},[["8d99","common/runtime","common/vendor"]]]);