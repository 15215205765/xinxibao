(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mainPages/payment/payment"],{"05d3":function(t,e,n){"use strict";(function(t){n("f466");a(n("66fd"));var e=a(n("2a5d"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"2a5d":function(t,e,n){"use strict";n.r(e);var a=n("a83e"),i=n("5896");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("799f");var r,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=s.exports},5896:function(t,e,n){"use strict";n.r(e);var a=n("8b19"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},"799f":function(t,e,n){"use strict";var a=n("fd48"),i=n.n(a);i.a},"8b19":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("3099"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={data:function(){return{time:"",type:1,orderid:"",payInfo:{},plugin:"",types:null,phoneHight:null,deliverystring:null}},onLoad:function(e){var n=this;this.orderid=e.orderid,this.plugin=e.plugin,this.deliverystring=e.deliverystring,this.init(),e.types&&(this.types=e.types),t.getSystemInfo({success:function(t){n.phoneHight=t.windowHeight+"px"}})},methods:{init:function(){var t=this;t.getOrderInfo()},checkPay:function(t){var e=this;e.type=t},getOrderInfo:function(){var t=this,e={orderid:"0"==t.orderid?"":t.orderid?t.orderid:1645,plugin:t.plugin||"wlfightgroup",deliverystring:t.deliverystring};a.default._post_form("&p=pay&do=getOrderInfo",e,function(e){if(t.payInfo=e.data,0==e.data.wechat?0==e.data.credit?t.type=3:t.type=1:t.type=2,void 0!==e.data.sytime&&0!=e.data.sytime)var n=setInterval(function(){t.payInfo.sytime--,t.time=t.payInfo.sytime;var e=Math.floor(t.time%3600);t.time=Math.floor(t.time/3600)+":"+Math.floor(e/60)+":"+t.time%60,0==t.payInfo.sytime&&clearInterval(n)},1e3);0==e.data.sytime&&(t.time="00:00:00")})},goPay:function(){var e=this,n=e.payInfo,i=e.type,o=1===i?"余额":2===i?"微信":"支付宝",r=a.default.getClientType(),u={order_no:n.tid,name:n.goodname,pay_type:i};1===i?t.showModal({title:"温馨提示",content:"确认使用".concat(o,"方式付款"),success:function(o){o.confirm&&(t.showLoading({title:"正在处理..."}),a.default._post_form("&p=pay&do=requestPay",u,function(t){1==e.types?(console.info(111111),a.default.navigationTo({url:"pages/mainPages/successRelease/successRelease?id="+t.data.tieziid})):(console.info(22222),1===i&&(1===t.data.status?a.default.showSuccess("支付成功",function(){a.default.navigationTo({url:"pages/mainPages/paySuccess/paySuccess?tid="+n.tid+"&plugin="+e.plugin,navType:"rediRect"})}):a.default.showError("支付失败",function(){a.default.navigationTo({url:"pages/subPages/orderList/orderList?type=0"})})))},!1,function(){t.hideLoading()}))}}):(t.showLoading({title:"正在处理..."}),a.default._post_form("&p=pay&do=requestPay",u,function(t){2===i&&e.wechatPayment(t.data,r),3===i&&e.aliPayment(t.data)},!1,function(){t.hideLoading()}))},aliPayment:function(t){console.log(t);var e=new this.$util.Base64,n=e.encode(t);a.default.navigationTo({url:"pages/mainPages/payment/pay?goto="+n})},wechatPayment:function(e,n){console.log(e,n);var i=this,r=e;if("2"===n)location.href=r;else if("1"===n);else if("3"===n){var u={timeStamp:r.timeStamp,nonceStr:r.nonceStr,package:r.package,signType:"MD5",paySign:r.paySign};t.requestPayment(o({provider:"wxpay"},u,{success:function(e){t.hideLoading(),console.log("支付成功",e),a.default.navigationTo({url:"pages/mainPages/paySuccess/paySuccess?tid="+i.payInfo.tid,navType:"rediRect"})},fail:function(e){t.hideLoading(),a.default.showError("支付失败",function(){a.default.navigationTo({url:"pages/subPages/orderList/orderList?type=0",navType:"reLaunch"})})}}))}}},computed:{textSubData:function(){return t.getStorageSync("TextSubstitution")}}};e.default=u}).call(this,n("543d")["default"])},a83e:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a})},fd48:function(t,e,n){}},[["05d3","common/runtime","common/vendor"]]]);