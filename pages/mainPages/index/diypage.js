(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mainPages/index/diypage"],{"0fc5":function(t,a,e){},"394a":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(e("3099"));n(e("9e9f"));function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return s(t)||r(t)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}var c=t.createInnerAudioContext(),l=function(){return e.e("components/template/loadlogo").then(e.bind(null,"9976"))},g=function(){return e.e("components/template/diypages").then(e.bind(null,"14f2"))},u=function(){return e.e("components/template/advert").then(e.bind(null,"dc1e"))},p=function(){return e.e("components/template/tabBar").then(e.bind(null,"27e4"))},f=function(){return e.e("static/mpvue-wxparse/src/wxParse").then(e.bind(null,"65c3"))},h=function(){return e.e("components/template/follow").then(e.bind(null,"c771"))},y=function(){return e.e("components/template/filtertab").then(e.bind(null,"ffc0"))},v=function(){return e.e("components/page/pageComponents/businessCard").then(e.bind(null,"79bd"))},m=function(){return e.e("components/template/loadmore").then(e.bind(null,"789c"))},D=function(){return e.e("components/template/nonemores").then(e.bind(null,"5e83"))},_={data:function(){return{followTitleShow:!0,followShow:!1,followType:"0",loadlogo:!1,swiperI:1,loading:!1,loadAgain:!1,datas:{basic:[],adv:"",page:{}},play_Audio:!1,diypagesData:[],richtext:{imageProp:{mode:"widthFix"}},pageInfo:{},btngroup:{backgroundColor:"#ffffff",btnBordeRadius:"",displayMode:"",eachLineNum:"",eachPageNum:"",list:[],indicatorDots:!0,duration:300,btngroupHandleData:[],swiperHeight:""},pageType:null,pageId:null,bottomMenu:null,shareData:{},current_page:1,order:"",cate_one:"",cate_two:"",city_id:"",total:null,cardhave:null,cardlist:[],loadingMore:!0,is_have:null,mobileHeight:""}},components:{Loadlogo:l,diypages:g,Advert:u,TabBars:p,wxParse:f,follow:h,filtertab:y,businessCard:v,loadMore:m,noneMores:D},created:function(){},onLoad:function(t){console.log(t),this.homePageInfo(t)},onShow:function(){this.pageInfo&&t.setNavigationBarTitle({title:this.pageInfo.title||""})},mounted:function(){},computed:{currentLoction:function(){return t.getStorageSync("curLoction")}},methods:{getMbtype:function(){var a=this;t.getSystemInfo({success:function(t){a.mobileHeight=t.windowHeight}})},homePageInfo:function(a){var e=this,n=a.id,i=a.type,d=(t.getStorageSync("curLoction"),t.getStorageSync("agencyData")),r=o.default.getClientType();"1"===r||"3"===r?o.default.getAreaId(d,"","",function(t){e.$nextTick(function(){e.getPagesData(i,n,t.data.aid)})}):(e.getPagesData(i,n),e.setmpShare(i,n)),e.getMbtype(),e.setData({pageType:i,pageId:n})},closeFollowTitle:function(){var t=this;t.followTitleShow=!1},closeFollowPop:function(){var t=this;t.followShow=!1},openQrShow:function(){var t=this;t.followShow=!0},getPagesData:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:232,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this,d={aid:n,type:a,page_id:e},r=t.getStorageSync("agencyData");void 0==i.pageId||""==i.pageId?d.page_id="":i.pageId&&(d.page_id=i.pageId),"13"===a&&(i.setData({city_id:r.areaid}),i.getShoplist(1,"","","",i.city_id,i.currentLoction.latitude,i.currentLoction.longitude)),o.default._post_form("&do=HomePage",d,function(a){if(0===a.errno){i.datas.adv=a.data.adv&&0!==a.data.adv.length?a.data.adv:"",i.datas.page=a.data.page?a.data.page:"",i.bottomMenu=a.data.menu,i.pageInfo=a.data.page,a.data.page.title&&t.setNavigationBarTitle({title:a.data.page.title}),a.data.page.music&&(c.src=a.data.page.music);var e=a.data.item,o=[];for(var n in e)o.push(e[n]);for(var d in i.diypagesData=o,i.diypagesData){if("menu"==i.diypagesData[d].id){i.diypagesData[d].btngroupData={};var r={list:[],indicatorDots:!0,duration:300,btngroupHandleData:[],swiperHeight:""};for(var s in r.backgroundColor=i.diypagesData[d].style.background,r.btnBordeRadius=i.diypagesData[d].style.navstyle,r.displayMode=i.diypagesData[d].style.showtype,r.eachLineNum=i.diypagesData[d].style.rownum,r.eachPageNum=i.diypagesData[d].style.pagenum,i.diypagesData[d].data)r.list.push(i.diypagesData[d].data[s]);0==i.diypagesData[d].style.showdot?r.indicatorDots=!1:r.indicatorDots=!0;var l="";if(l=r.list.length>r.eachPageNum?r.eachPageNum:r.list.length,r.swiperHeight=87*Math.ceil(l/r.eachLineNum)+15,r.list&&r.list.length>0)for(var g=Math.ceil(r.list.length/r.eachPageNum),u=0;u<g;u++){for(var p=[],f=u*r.eachPageNum,h=f;h<r.eachPageNum*(u+1)&&h<r.list.length;h++)p.push(r.list[h]);r.btngroupHandleData.push(p)}i.diypagesData[d].btngroupData=r}if("picturew4"==i.diypagesData[d].id){var y=[];for(var v in i.diypagesData[d].data)y.push(i.diypagesData[d].data[v]);i.diypagesData[d].data=y}if("picturew5"==i.diypagesData[d].id){var m=[];for(var D in i.diypagesData[d].data)m.push(i.diypagesData[d].data[D]);i.diypagesData[d].data=m}if("pictures"==i.diypagesData[d].id){var _=[];for(var b in i.diypagesData[d].data)_.push(i.diypagesData[d].data[b]);i.diypagesData[d].data=_}if("shop"==i.diypagesData[d].id){var w=[];for(var S in i.diypagesData[d].data){var L=[];for(var P in i.diypagesData[d].data[S].goods)""!==i.diypagesData[d].data[S].goods[P]&&("active"==P?(i.diypagesData[d].data[S].goods[P].css="qiang",i.diypagesData[d].data[S].goods[P].tag="抢"):"coupon"==P?(i.diypagesData[d].data[S].goods[P].css="hui",i.diypagesData[d].data[S].goods[P].tag="券"):"fightgroup"==P?(i.diypagesData[d].data[S].goods[P].css="pin",i.diypagesData[d].data[S].goods[P].tag="拼"):"groupon"==P?(i.diypagesData[d].data[S].goods[P].css="tuan",i.diypagesData[d].data[S].goods[P].tag="团"):"halfcard"==P?(i.diypagesData[d].data[S].goods[P].css="ka",i.diypagesData[d].data[S].goods[P].tag="卡"):"packages"==P?(i.diypagesData[d].data[S].goods[P].css="li",i.diypagesData[d].data[S].goods[P].tag="礼"):"bargain"==P&&(i.diypagesData[d].data[S].goods[P].css="kan",i.diypagesData[d].data[S].goods[P].tag="砍"),L.push(i.diypagesData[d].data[S].goods[P]));i.diypagesData[d].data[S].goods=L,w.push(i.diypagesData[d].data[S])}i.diypagesData[d].shopArr=w}if("banner"==i.diypagesData[d].id){var I=i.diypagesData[d].width,M=i.diypagesData[d].height,T=I/M,A=t.getSystemInfoSync().windowWidth/T;i.diypagesData[d].autoHeight=A}}i.datas.basic=i.diypagesData}},!1,function(){i.loadAgain=!0,i.loadlogo=!0})},playAudio:function(){var t=this,a=!t.play_Audio;t.pageInfo.music;a&&(c.play(),c.onPlay(function(){console.log("开始播放")})),a||(c.pause(),c.onPause(function(){console.log("暂停播放")})),t.play_Audio=a},setmpShare:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=this;o.default._post_form("&do=Shareinfo",{type:t,id:a},function(t){e.shareData=t.data})},selectAllarea:function(){var t=this,a=t.sort,e=t.cate_one,o=t.cate_two;t.setData({city_id:"",current_page:1}),t.getShoplist(1,a,e,o,"",t.currentLoction.latitude,t.currentLoction.longitude)},selectAreaid:function(t){var a=this,e=a.sort,o=a.cate_one,n=a.cate_two;a.setData({city_id:t.id,current_page:1}),a.getShoplist(1,e,o,n,t.id,a.currentLoction.latitude,a.currentLoction.longitude)},selectClassid:function(t){var a=this,e=a.sort,o=a.city_id;0===t.list.length&&(a.getShoplist(1,e,t.cate_one,"",o,a.currentLoction.latitude,a.currentLoction.longitude),a.setData({current_page:1,cate_two:""})),a.setData({cate_one:t.cate_one})},selectClassTwoid:function(t){var a=this,e=a.sort,o=a.city_id,n=a.cate_one;a.getShoplist(1,e,n,t.cate_two,o,a.currentLoction.latitude,a.currentLoction.longitude),a.setData({cate_two:t.cate_two,current_page:1})},selectOrders:function(t){console.log(t);var a=this,e=a.city_id,o=a.cate_one,n=a.cate_two;a.getShoplist(1,t.val,o,n,e,a.currentLoction.latitude,a.currentLoction.longitude),a.setData({sort:t.val,current_page:1})},pageScrollHeight:function(a){"1"===a?t.pageScrollTo({scrollTop:190}):t.pageScrollTo({scrollTop:0})},getChild:function(t){var a=this,e=a.sort,o=a.cate_one,n=a.cate_two,i=a.city_id;a.current_page,a.total;a.getShoplist(1,e,o,n,i,a.currentLoction.latitude,a.currentLoction.longitude,!1,t)},getShoplist:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",g=this,u={page:t,sort:a,cate_one:e,cate_two:n,city_id:d,lat:r,lng:s,is_collect:0,search:l};o.default._post_form("&p=citycard&do=homeList",u,function(t){var a,e=t.data.list;c?e.length>0?(a=g["cardlist"]).push.apply(a,i(e)):g.loadingMore=!0:g.setData({cardlist:e,loadingMore:0===e.length||g.current_page===t.data.total,total:t.data.total,is_have:t.data.is_have})})},cardOnReachBottom:function(){console.log("Bottom");var t=this,a=t.sort,e=t.cate_one,o=t.cate_two,n=t.city_id,i=t.current_page,d=t.total;if(i>=d)return t.loadingMore=!0,!1;t.getShoplist(++t.current_page,a,e,o,n,t.currentLoction.latitude,t.currentLoction.longitude,!0)}},destroyed:function(){c.stop(),c.onStop(function(){console.log("页面跳转暂停播放")})},onPullDownRefresh:function(){},onReachBottom:function(){console.log(),"13"!==this.pageType?(t.$emit("isBottomMore"),t.$emit("tabisBottomMore")):this.cardOnReachBottom()}};a.default=_}).call(this,e("543d")["default"])},"6ff0":function(t,a,e){"use strict";e.r(a);var o=e("f064"),n=e("e8bc");for(var i in n)"default"!==i&&function(t){e.d(a,t,function(){return n[t]})}(i);e("7249");var d,r=e("f0c5"),s=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"23c65509",null,!1,o["a"],d);a["default"]=s.exports},7249:function(t,a,e){"use strict";var o=e("0fc5"),n=e.n(o);n.a},bcc3:function(t,a,e){"use strict";(function(t){e("f466");o(e("66fd"));var a=o(e("6ff0"));function o(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("543d")["createPage"])},e8bc:function(t,a,e){"use strict";e.r(a);var o=e("394a"),n=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(a,t,function(){return o[t]})}(i);a["default"]=n.a},f064:function(t,a,e){"use strict";var o,n=function(){var t=this,a=t.$createElement;t._self._c},i=[];e.d(a,"b",function(){return n}),e.d(a,"c",function(){return i}),e.d(a,"a",function(){return o})}},[["bcc3","common/runtime","common/vendor"]]]);