(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subPages/orderList/orderDetails/orderDetails"],{"23a3":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("3099"));o(n("a81a"));function o(e){return e&&e.__esModule?e:{default:e}}var r=function(){return n.e("components/template/PopManager").then(n.bind(null,"b696"))},a=function(){return n.e("components/template/loadlogo").then(n.bind(null,"9976"))},u=null,d={components:{PopManager:r,loadlogo:a},data:function(){return{e:{},currentLoction:null,title:"待评价",orderid:0,plugin:"",time:"",orderDetailList:{},show:!1,expressList:{},lat:null,lng:null,loading:!0,phoneHeight:null,countDown:{}}},logistics:function(e,t){i.default.navigationTo({url:"pages/mainPages/express/express?order_id="+e+"&table_id="+t})},onLoad:function(t){var n=this;n.e=t,e.getSystemInfo({success:function(t){n.phoneHeight=e.upx2px(1590)+"px"}}),n.orderid=t.orderid,n.plugin=t.plugin},onShow:function(){var e=this;e.init(e.e.orderid,e.e.plugin)},methods:{goGoodDetail:function(){var e=this;i.default.navigationTo({url:"pages/subPages/goods/index?id="+e.orderDetailList.goodsid+"&type="+e.orderDetailList.pluginno})},goDw:function(){var e=this,t={location:e.orderDetailList.location,storename:e.orderDetailList.storename,address:e.orderDetailList.address};i.default.openLocation(t)},remindSend:function(){var e=this,t={orderid:e.orderid,plugin:e.plugin,goodsname:e.orderDetailList.goodName};e.$set(e.orderDetailList,"isRemind",!0),i.default.showSuccess("已提醒发货",function(){}),setTimeout(function(){i.default._post_form("&p=member&do=remindSend",t,function(e){})},500)},goPl:function(){var e=this;i.default.navigationTo({url:"pages/mainPages/comment/comment?goods_id="+e.orderDetailList.goodsid+"&order_id="+e.orderDetailList.id+"&plugin="+e.orderDetailList.pluginno+"&a="+e.orderDetailList.a})},wxApiCallback:function(t,n){var o=this;jWeixin.ready(function(){jWeixin.getLocation({type:"gcj02",success:function(r){i.default.getAreaId(r,"","",function(e){o.$nextTick(function(){o.getOrderDetail(t,n,r)})}),o.setData({currentLoction:r}),e.setStorageSync("curLoction",r)},fail:function(){i.default.getAreaId("","","",function(e){o.$nextTick(function(){o.getOrderDetail(t,n,"")})})},cancel:function(){i.default.getAreaId("","","",function(e){o.$nextTick(function(){o.getOrderDetail(t,n,"")})})}})})},init:function(t,n){var o=this,r=i.default.getClientType();o.curLoction=e.getStorageSync("curLoction");var a=e.getStorageSync("curLoction"),u=e.getStorageSync("agencyData");"1"===r||"3"===r?a?u?o.getOrderDetail(t,n,a):i.default.getAreaId(a,"","",function(e){o.getOrderDetail(t,n,a)}):u?(o.getOrderDetail(t,n,o.currentLoction),console.log(o.currentLoction,"_this.currentLoction")):i.default.getLocation().then(function(r){i.default.getAreaId(r,"","",function(e){o.$nextTick(function(){o.getOrderDetail(t,n,r)})}),o.setData({currentLoction:r}),e.setStorageSync("curLoction",r)}):o.getOrderDetail(t,n)},goAfterSale:function(){var e=this;i.default.navigationTo({url:"pages/subPages/orderList/afterSale/afterSale?id="+e.orderid+"&plugin="+e.plugin})},goHx:function(){var e=this;i.default.navigationTo({url:"pages/mainPages/orderWrite/orderWrite?id="+e.orderid+"&plugin="+e.plugin})},cancelOrder:function(){var t=this,n={id:t.orderid,plugin:t.plugin};e.showModal({title:"提示",content:"是否取消订单？",success:function(e){e.confirm?i.default._post_form("&p=pay&do=cancelOrder",n,function(e){t.getOrderDetail(t.orderid,t.plugin,t.curLoction)}):e.cancel}})},getOrderDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=this,r={lat:n?n.latitude:"",lng:n?n.longitude:"",orderid:e,plugin:t};i.default._post_form("&p=pay&do=orderDetail",r,function(e){o.loading=!1,o.orderDetailList=e.data,o.orderDetailList.isTimeOver=!1;var t=e.data.sytime;if(o.orderPayTime(t),o.orderDetailList.expresssn){var n={id:o.orderDetailList.id,table:o.orderDetailList.a};i.default._post_form("&p=Pay&do=getLogisticsInfo",n,function(e){e.data.list?o.expressList=e.data.list[0]:o.expressList={AcceptStation:"暂无物流信息",AcceptTime:""}})}})},sureReceive:function(){var t=this,n={id:t.orderid,plugin:t.plugin};console.log(t.orderid,t.plugin),i.default.showError("请确认收货",function(o){o.confirm&&(e.showLoading({}),i.default._post_form("&p=pay&do=sureReceive",n,function(e){0===e.errno&&t.init(t.orderid,t.plugin)},!1,function(){e.hideLoading()}))},!0)},orderPayTime:function(e){var t=this;clearInterval(u),u=setInterval(function(){var n=(new Date).getTime(),i=1e3*Number(e),o=parseInt((i-n)/1e3),r=function(e){var n=parseInt(e/60/60/24*24),i=parseInt(e/60%60),o=parseInt(e%60),r={hh:n<10?"0".concat(n):n,mm:i<10?"0".concat(i):i,ss:o<10?"0".concat(o):o};t.$set(t.countDown,"timeobj",r)};if(!(o>0))return t.$set(t.countDown,"timeobj",null),clearInterval(u),!1;r(o)},1e3)},goPay:function(){var e=this;i.default.navigationTo({url:"pages/mainPages/payment/payment?orderid="+e.orderid+"&plugin="+e.plugin})},logistics:function(e,t){i.default.navigationTo({url:"pages/mainPages/express/express?order_id="+e+"&table_id="+t})},kfPhone:function(){var t=this;e.showModal({title:"联系商家",content:t.orderDetailList.mobile,success:function(n){n.confirm?e.makePhoneCall({phoneNumber:t.orderDetailList.mobile}):n.cancel}})}}};t.default=d}).call(this,n("543d")["default"])},"7f0a":function(e,t,n){},9710:function(e,t,n){"use strict";n.r(t);var i=n("23a3"),o=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);t["default"]=o.a},a370:function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.show=!0},e.e1=function(t){e.show=!1})},r=[];n.d(t,"b",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i})},b728:function(e,t,n){"use strict";(function(e){n("f466");i(n("66fd"));var t=i(n("c7ff"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},c7ff:function(e,t,n){"use strict";n.r(t);var i=n("a370"),o=n("9710");for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);n("e66d");var a,u=n("f0c5"),d=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"1c3abb94",null,!1,i["a"],a);t["default"]=d.exports},e66d:function(e,t,n){"use strict";var i=n("7f0a"),o=n.n(i);o.a}},[["b728","common/runtime","common/vendor"]]]);