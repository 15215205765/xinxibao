(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subPages/orderList/afterSale/afterSale"],{"0300":function(e,t,n){"use strict";n.r(t);var a=n("7e9e"),o=n("5e73");for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);n("9715");var r,s=n("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"16545486",null,!1,a["a"],r);t["default"]=c.exports},"25af":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("a34a")),o=r(n("3099")),i=r(n("a81a"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(a,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function r(e){s(i,a,o,r,c,"next",e)}function c(e){s(i,a,o,r,c,"throw",e)}r(void 0)})}}var u=function(){return n.e("components/template/PopManager").then(n.bind(null,"b696"))},l={components:{PopManager:u},data:function(){return{reasonType:"bottom",reasonPop:!1,type:"",codes:[],AfterSaleInfo:{},id:null,plugin:null,detail:"",thumbs:[],allprice:0,imagse:[],reasonList:["预约不上","商家营业但不接待","商家建议其他平台/直接购买","店里活动更优惠","商家/停业/装修/转让","朋友/网上评论不好","买多了/买错了","计划有变，没时间消费"],reason:0,reasonText:""}},onLoad:function(e){var t=this;this.id=e.id,this.plugin=e.plugin,t.afterid=e.afterid||"",this.init(),t.reasonText=t.reasonList[0]},methods:{con:function(){var e=this;console.info(e.reasonList),e.reasonPop=!0},init:function(){var e=this;e.getAfterSaleInfo()},closeReasonPop:function(){var e=this;e.reasonPop=!1},getAfterSaleInfo:function(){var e=this,t={id:e.id,plugin:e.plugin,afterid:e.afterid};o.default._post_form("&p=pay&do=afterSale",t,function(t){e.AfterSaleInfo=t.data,"2"==t.data.usestatus&&(e.allprice=t.data.allprice)})},checkType:function(e){var t=this;t.type=e},checkReason:function(e){var t=this;t.reason=e,t.reasonText=t.reasonList[e]},checkedCodes:function(e,t){var n=this;if(t=Number(t),-1!==n.codes.indexOf(e)){for(var a=0;a<n.codes.length;a++)n.codes[a]==e&&n.codes.splice(a,1);n.allprice=i.default.subtractionFloat(n.allprice,t,100),n.allprice>n.AfterSaleInfo.allprice&&(n.allprice=n.AfterSaleInfo.allprice)}else n.codes.push(e),n.allprice=i.default.additionFloat(n.allprice,t,100),n.allprice>n.AfterSaleInfo.allprice&&(n.allprice=n.AfterSaleInfo.allprice);console.info(n.codes)},closePic:function(e){for(var t=this,n=0;n<t.imagse.length;n++)e==t.imagse[n]&&(t.imagse.splice(n,1),t.thumbs.splice(n,1))},afterSaleApply:function(){var t=this,n={id:t.id,plugin:t.plugin,type:t.type,checkcodes:t.codes,reason:t.reasonText,detail:t.detail,thumbs:t.thumbs,afterid:t.afterid,usestatus:t.AfterSaleInfo.usestatus};""!=t.type?t.codes.length<1&&"2"!=t.AfterSaleInfo.usestatus?e.showToast({icon:"none",title:"请选择核销码",duration:2e3}):""!=t.detail?(t.saveForm("1"),o.default._post_form("&p=pay&do=afterSaleApply",n,function(t){e.showToast({icon:"none",title:"申请退款成功",duration:2e3,success:function(){setTimeout(function(){e.navigateBack({delta:1})},2e3)}})})):e.showToast({icon:"none",title:"请输入问题描述",duration:2e3}):e.showToast({icon:"none",title:"请选择服务类型",duration:2e3})},uploadFiles:function(e){var t=this;wx.chooseImage({count:6,sourceType:["album","camera"],success:function(){var e=c(a.default.mark(function e(n){var i,r;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.info(n),i=0;case 2:if(!(i<n.tempFilePaths.length)){e.next=11;break}return e.next=5,o.default._upLoad(n.tempFilePaths[i]);case 5:r=e.sent,t.thumbs.push(r.data.image),t.imagse.push(r.data.img);case 8:i++,e.next=2;break;case 11:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}()})}}};t.default=l}).call(this,n("543d")["default"])},"5d48":function(e,t,n){"use strict";(function(e){n("f466");a(n("66fd"));var t=a(n("0300"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"5e73":function(e,t,n){"use strict";n.r(t);var a=n("25af"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t["default"]=o.a},"7a3d":function(e,t,n){},"7e9e":function(e,t,n){"use strict";var a,o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.AfterSaleInfo.type.indexOf(3)),a=e.AfterSaleInfo.type.indexOf(2),o=e.AfterSaleInfo.type.indexOf(1),i=e.__map(e.AfterSaleInfo.checkcodes,function(t,n){var a=e.codes.indexOf(t.checkcode),o=e.codes.indexOf(t.checkcode);return{$orig:e.__get_orig(t),g3:a,g4:o}});e.$mp.data=Object.assign({},{$root:{g0:n,g1:a,g2:o,l0:i}})},i=[];n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a})},9715:function(e,t,n){"use strict";var a=n("7a3d"),o=n.n(a);o.a}},[["5d48","common/runtime","common/vendor"]]]);