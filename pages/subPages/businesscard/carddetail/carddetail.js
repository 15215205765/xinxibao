(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subPages/businesscard/carddetail/carddetail"],{"21d6":function(t,a,e){},"499d":function(t,a,e){"use strict";var o,n=function(){var t=this,a=t.$createElement;t._self._c},r=[];e.d(a,"b",function(){return n}),e.d(a,"c",function(){return r}),e.d(a,"a",function(){return o})},8450:function(t,a,e){"use strict";var o=e("21d6"),n=e.n(o);n.a},"9ba9":function(t,a,e){"use strict";e.r(a);var o=e("f4b0"),n=e.n(o);for(var r in o)"default"!==r&&function(t){e.d(a,t,function(){return o[t]})}(r);a["default"]=n.a},f4b0:function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(e("3099"));function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return c(t)||s(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}var d=function(){return e.e("components/template/postList").then(e.bind(null,"b476"))},u=function(){return e.e("components/template/loadlogo").then(e.bind(null,"9976"))},l=function(){return e.e("components/template/nonemores").then(e.bind(null,"5e83"))},f=function(){return e.e("components/template/loadmore").then(e.bind(null,"789c"))},h=function(){return e.e("components/template/shareBottom").then(e.bind(null,"cb2e"))},p={data:function(){return{loadlogo:!1,currentabType:"post",cardInfoData:{},shopData:[],current_page:1,total:null,index:-1,indexShow:-1,invitationListData:[],agencyData:{},postMore:!0,shareBottomShow:!1,shareShow:!1,tabbar:[{title:"Ta的动态",tabType:"post"},{title:"Ta的店铺",tabType:"shop"}]}},methods:{tabbarSelect:function(a){var e=this,o=e.cardInfoData,n=e.agencyData;t.showLoading({}),"shop"===a.tabType?e.getuserShopList(o.mid,n.lat,n.lng):(e.getuserList(o.mid,1,0,!1),e.current_page=1),e.currentabType=a.tabType},navgateTo:function(t){o.default.navigationTo({url:"pages/mainPages/store/index?sid="+t})},getCardDetail:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=this,n=t.getStorageSync("agencyData");o.default._post_form("&p=citycard&do=cardInfo",{id:a},function(t){0===t.errno&&(e.setData({cardInfoData:t.data,agencyData:n}),e.getuserList(t.data.mid))},!1,function(){e.loadlogo=!0})},laudCollect:function(t,a){var e=this,n=e.cardInfoData,r="laud"===t?"&p=citycard&do=cardFabulous":"&p=citycard&do=cardCollect",i="laud"===t?"is_laud":"is_collect",s="laud"===t?"laud":"total_collect";console.log(i),o.default._post_form(r,{id:a},function(t){0===t.errno&&(0===n[i]?(e.$set(e.cardInfoData,i,1),n[s]=Number(n[s])+1):1===n[i]&&(e.$set(e.cardInfoData,i,0),n[s]=n[s]-1))})},fnClick:function(t,a){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this;"laud"!==t&&"collect"!==t||o.laudCollect(t,a),"share"===t&&e&&(o.shareBottomShow=!0)},goPost:function(t){var a=this;a.shareBottomShow=!1},closeShareBottom:function(){var t=this;t.shareBottomShow=!1},closeShareShow:function(){var t=this;t.shareShow=!1,t.shareBottomShow=!1},shareImgShow:function(){var t=this;t.shareShow=!0,t.shareBottomShow=!1},shangjiaFold:function(t){this.shopFold=!1,this.shopFoldIndex=t},shangjiaUpFold:function(t){this.shopFold=!0,this.shopFoldIndex=t},operationShow:function(t){var a=this;a.indexShow=t},getuserShopList:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this;o.default._post_form("&p=store&do=userShopList",{mid:a,lat:e,lng:n},function(t){if(0===t.errno){for(var a=0;a<t.data.length;a++){var e=[];for(var o in t.data[a].goods){var n=t.data[a].goods[o];""!==n&&("active"==o?(n.css="qiang",n.tag="抢"):"coupon"==o?(n.css="hui",n.tag="券"):"fightgroup"==o?(n.css="pin",n.tag="拼"):"groupon"==o?(n.css="tuan",n.tag="团"):"halfcard"==o?(n.css="ka",n.tag="卡"):"packages"==o&&(n.css="li",n.tag="礼"),e.push(n))}t.data[a].goods=e}r.setData({shopData:t.data})}},!1,function(){t.hideLoading()})},getuserList:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this;o.default._post_form("&p=pocket&do=userList",{mid:a,page:e,status:n},function(t){if(0===t.errno){var a,e=t.data;if(i)if(e.list.length>0)(a=s["invitationListData"]).push.apply(a,r(e.list));else s.postMore=!0;else s.setData({invitationListData:e.list,total:t.data.total,postMore:0===e.list.length||s.current_page===t.data.total})}},!1,function(){t.hideLoading()})},fnbottomClick:function(a,e){switch(a){case"chat":o.default.navigationTo({url:"pages/subPages/homepage/chat/chat?other_party_id=".concat(e,"&type=1&other_party_type=1")});break;case"phone":t.makePhoneCall({phoneNumber:e});break;case"index":o.default.navigationTo({url:"pages/mainPages/index/diypage?i=26&type=13"});break;case"mycard":o.default.navigationTo({url:"pages/subPages/businesscard/carddetail/renewcarddetail",navType:"rediRect"});break}}},computed:{isCard:function(){var t=o.default.getClientType();return"3"===t},cardShare:function(){return this.$store.state.isCardshare}},watch:{cardShare:function(t,a){var e=this;t>a&&o.default._post_form("&p=citycard&do=cardShare",{id:e.cardInfoData.id},function(t){0===t.errno&&e.$set(e.cardInfoData,"share",Number(e.cardInfoData.share)+1)})}},components:{postList:d,Loadlogo:u,nonemores:l,loadmore:f,shareBottom:h},onLoad:function(t){var a=this;a.getCardDetail(t.cardid)},onReachBottom:function(t){var a=this,e=a.currentabType,o=a.cardInfoData,n=a.agencyData;if(a.current_page>=a.total)return a.postMore=!0,!1;"post"===e?a.getuserList(o.mid,++a.current_page,0,!0):"shop"===e&&a.getuserShopList(o.mid,n.lat,n.lng)}};a.default=p}).call(this,e("543d")["default"])},fda8:function(t,a,e){"use strict";e.r(a);var o=e("499d"),n=e("9ba9");for(var r in n)"default"!==r&&function(t){e.d(a,t,function(){return n[t]})}(r);e("8450");var i,s=e("f0c5"),c=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);a["default"]=c.exports},ff2d:function(t,a,e){"use strict";(function(t){e("f466");o(e("66fd"));var a=o(e("fda8"));function o(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("543d")["createPage"])}},[["ff2d","common/runtime","common/vendor"]]]);