(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subPages/homepage/chat/chat"],{3576:function(t,e,n){},a70c:function(t,e,n){"use strict";(function(t){n("f466");o(n("66fd"));var e=o(n("cd7d"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},cd7d:function(t,e,n){"use strict";n.r(e);var o=n("dd14"),a=n("d95e");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("dee1");var r,c=n("f0c5"),u=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"697ec63b",null,!1,o["a"],r);e["default"]=u.exports},d95e:function(t,e,n){"use strict";n.r(e);var o=n("f4f5"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},dd14:function(t,e,n){"use strict";var o,a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",function(){return a}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o})},dee1:function(t,e,n){"use strict";var o=n("3576"),a=n.n(o);a.a},f4f5:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("3099"));function a(t){return t&&t.__esModule?t:{default:t}}function i(t){return u(t)||c(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var l=null,d=null,s={data:function(){return{canSend:1,phoneHight:null,scrollHeight:null,current_page:1,chatList:[],total:null,scrollTop:0,chatcontent:"",other_id:null,receive_type:null,send_type:null,sendmsgnum:0,id:""}},onLoad:function(e){var n=this;n.other_party_type=e.other_party_type,n.type=e.type,n.other_party_id=e.other_party_id,e.id?n.id=e.id:n.id="",t.getSystemInfo({success:function(e){n.phoneHight=e.windowHeight+"px",n.phoneHight1=e.windowHeight,n.scrollHeight=n.phoneHight1-t.upx2px(120)+"px"}}),this.setData(e)},components:{},computed:{},mounted:function(){this.chatDetailData()},methods:{chatDetailData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this;o.default._post_form("&p=im&do=get",{id:a.id,other_party_id:a.other_party_id,page:e,other_party_type:a.other_party_type,type:a.type},function(e){if(0===e.errno){var o,r=e.data,c=a.chatList;if(t.setNavigationBarTitle({title:e.data.receive_name}),n)a.chatList=(o=r.list).concat.apply(o,i(c));else if(c.length>0){var u=c.concat.apply(c,i(r.list)),d={},s=[];u.map(function(t,e){d[t.id]||(s.push(t),d[t.id]=!0)}),a.$nextTick(function(){a.chatList=s}),clearTimeout(l),l=setTimeout(function(){a.chatDetailData()},5e3)}else a.setData({chatList:e.data.list,total:e.data.total}),a.$nextTick(function(){a.scrollTop=9999}),clearTimeout(l),l=setTimeout(function(){a.chatDetailData()},5e3)}},function(t){1===t.data.errno&&o.default.navigationTo({url:t.data.data.url})},function(){})},reachToupper:function(){var t=this;if(t.current_page>=t.total)return!1;t.chatDetailData(++t.current_page,!0)},messageSend:function(){console.info(111111111);var t=this,e={send_id:t.id,send_type:t.type,receive_type:t.other_party_type,type:0,receive_id:t.other_party_id,content:t.chatcontent};""!==t.chatcontent&&1==t.canSend&&(t.canSend=0,o.default._post_form("&p=im&do=send",e,function(e){t.canSend=1,0===e.errno&&(t.setData({chatcontent:""}),clearTimeout(d),d=setTimeout(function(){t.scrollTop=t.scrollTop+1},500),t.chatDetailData())},function(e){t.canSend=1}))},lose:function(){}},onHide:function(){clearTimeout(l),clearTimeout(d),console.log("onHide")},onUnload:function(){clearTimeout(l),clearTimeout(d),console.log("onUnload")},destroyed:function(){clearTimeout(l),clearTimeout(d),console.log("destroyed")}};e.default=s}).call(this,n("543d")["default"])}},[["a70c","common/runtime","common/vendor"]]]);