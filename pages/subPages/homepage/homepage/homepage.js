(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subPages/homepage/homepage/homepage"],{"2da4e":function(t,e,n){"use strict";var o,a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",function(){return a}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o})},"74ac":function(t,e,n){"use strict";n.r(e);var o=n("bb70"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},ae12:function(t,e,n){},bb70:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("a34a")),a=i(n("3099"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,o,a,i,s){try{var r=t[i](s),l=r.value}catch(u){return void n(u)}r.done?e(l):Promise.resolve(l).then(o,a)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function r(t){s(i,o,a,r,l,"next",t)}function l(t){s(i,o,a,r,l,"throw",t)}r(void 0)})}}function l(t){return d(t)||c(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function d(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var p=function(){return n.e("components/template/postList").then(n.bind(null,"b476"))},f=function(){return n.e("components/template/PartLoading").then(n.bind(null,"54a7"))},g=function(){return n.e("components/template/loading").then(n.bind(null,"a9ce"))},h=function(){return n.e("components/template/tabBar").then(n.bind(null,"27e4"))},m=function(){return n.e("components/template/nonemores").then(n.bind(null,"5e83"))},v=function(){return n.e("components/template/loadmore").then(n.bind(null,"789c"))},b={data:function(){return{mid:null,latitude:null,longitude:null,currentType:"issue",userInfo:{},loadlogo:!1,loading:!1,current_page:1,total:null,invitationListData:[],shopData:[],visitorListData:[],tabbar:[{title:"发布",type:"issue",isOpen:!0},{title:"店铺",type:"shop",isOpen:!0},{title:"访客",type:"visitor",isOpen:!0}],indexShow:-1,slide_Top:0,selectTabbarLoading:!1,postTotal:0,shopTotal:0,visitorTotal:0,postMore:!0,shopFold:!0,shopFoldIndex:-1,phoneHight:null}},components:{postList:p,PartLoading:f,Loading:g,tabBars:h,nonemores:m,loadmore:v},computed:{},onLoad:function(e){var n=this,o=a.default.getBrowser(),i=e.mid,s=e.checkType;if(t.getSystemInfo({success:function(e){n.phoneHight=e.windowHeight-t.upx2px(100)+"px",console.info("windowHeight",e.windowHeight),console.info("upx2px",t.upx2px(100))}}),"chrome53.0"===o)return t.showModal({content:"微信浏览器版本过低,请使用系统浏览器",showCancel:!1}),!1;n.getmainPageInfo(i,s)},methods:{goChat:function(){var t=this;a.default.navigationTo({url:"pages/subPages/homepage/chat/chat?other_party_id="+t.mid+"&other_party_type=1&type=1&id="})},getmainPageInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:982,n=arguments.length>1?arguments[1]:void 0,o=this,i=t.getStorageSync("agencyData");a.default.getClientType();a.default._post_form("&p=member&do=mainPageInfo",{mid:e},function(t){0===t.errno&&(o.loadlogo=!0,1===t.data.is_pocket&&"1"===n?o.getuserList(e):o.getuserShopList(e,i.lat,i.lng),o.tabbar[0].isOpen=1===t.data.is_pocket,o.setData({mid:e,userInfo:t.data,currentType:"1"===n&&1===t.data.is_pocket?"issue":"shop",latitude:i.lat,longitude:i.lng}))},!1,function(){o.loadlogo=!0})},wxApiCallback:function(){var t=this;console.log(jWeixin),jWeixin.ready(function(){jWeixin.getLocation({type:"gcj02",success:function(e){t.setData({latitude:e.latitude,longitude:e.longitude})}})})},getvisitorList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this;a.default._post_form("&p=member&do=visitorList",{mid:t,page:e},function(t){if(0===t.errno){var e,a=t.data;if(o.visitorTotal=t.data.total,n)if(a.list.length>0)(e=o["visitorListData"]).push.apply(e,l(a.list));else o.postMore=!0;else o.setData({visitorListData:a.list,total:t.data.total,loading:0===a.list.length||o.current_page===t.data.total})}},!1,function(){o.selectTabbarLoading=!1})},getuserShopList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=this;a.default._post_form("&p=store&do=userShopList",{mid:t,lat:e,lng:n},function(t){if(0===t.errno)if(console.info("length",t.data.length),0==t.data.length)o.shopTotal=0;else{for(var e=0;e<t.data.length;e++){var n=[];for(var a in t.data[e].goods){var i=t.data[e].goods[a];""!==i&&("active"==a?(i.css="qiang",i.tag="抢"):"coupon"==a?(i.css="hui",i.tag="券"):"fightgroup"==a?(i.css="pin",i.tag="拼"):"groupon"==a?(i.css="tuan",i.tag="团"):"halfcard"==a?(i.css="ka",i.tag="卡"):"packages"==a&&(i.css="li",i.tag="礼"),n.push(i))}t.data[e].goods=n}o.shopTotal=t.data.length;var s=t.data;o.setData({shopData:s})}},!1,function(){o.selectTabbarLoading=!1})},getuserList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this;a.default._post_form("&p=pocket&do=userList",{mid:t,page:e,status:n},function(t){if(0===t.errno){var e,n=t.data;if(o)if(n.list.length>0)(e=i["invitationListData"]).push.apply(e,l(n.list));else i.postMore=!0;else i.setData({invitationListData:n.list,total:t.data.total,postTotal:t.data.total,loading:0===n.list.length||i.current_page===t.data.total})}},!1,function(){i.selectTabbarLoading=!1})},scrolly:function(t){this.slide_Top=t.detail.scrollTop},ReachBottom:function(t){var e=this,n=e.currentType;if(e.current_page>=e.total)return e.postMore=!0,!1;"issue"===n?e.getuserList(e.mid,++e.current_page,0,!0):"visitor"===n&&e.getvisitorList(e.mid,++e.current_page,0,!0)},navgateTo:function(t){a.default.navigationTo({url:"pages/mainPages/store/index?sid="+t})},selectTabbar:function(t){var e=this;e.setData({currentType:t,selectTabbarLoading:!0,current_page:1}),"issue"===t&&e.getuserList(e.mid),"shop"===t&&e.getuserShopList(e.mid,e.latitude,e.longitude),"visitor"===t&&e.getvisitorList(e.mid)},operationShow:function(t){var e=this;e.indexShow=t},navigateTo:function(t){var e=-1!==t.indexOf("https");e?location.href=t:a.default.navigationTo({url:t})},shangjiaFold:function(t){this.shopFold=!1,this.shopFoldIndex=t},shangjiaUpFold:function(t){this.shopFold=!0,this.shopFoldIndex=t},uploadFiles:function(){var e=this;"1"==e.userInfo.useself&&wx.chooseImage({count:1,sourceType:["album","camera"],success:function(){var n=r(o.default.mark(function n(i){var s,r;return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return console.info("tempFilePaths",i.tempFilePaths),n.next=3,a.default._upLoad(i.tempFilePaths[0]);case 3:s=n.sent,console.info("tempFilePaths1",i.tempFilePaths),e.userInfo.thumb=s.data.img,r={img:s.data.img},a.default._post_form("&p=member&do=setMainBgImg",r,function(n){console.info("tempFilePaths2",n),e.userInfo.isdefault=0,t.showToast({icon:"none",title:"更改成功",duration:2e3})});case 8:case"end":return n.stop()}},n,this)}));function i(t){return n.apply(this,arguments)}return i}()})}}};e.default=b}).call(this,n("543d")["default"])},c2bd:function(t,e,n){"use strict";(function(t){n("f466");o(n("66fd"));var e=o(n("f7d0"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},c5e5:function(t,e,n){"use strict";var o=n("ae12"),a=n.n(o);a.a},f7d0:function(t,e,n){"use strict";n.r(e);var o=n("2da4e"),a=n("74ac");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("c5e5");var s,r=n("f0c5"),l=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"6b841ba9",null,!1,o["a"],s);e["default"]=l.exports}},[["c2bd","common/runtime","common/vendor"]]]);